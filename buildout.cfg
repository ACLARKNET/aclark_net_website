[buildout]
extends = 
    http://dist.aclark.net/build/plone/4.0.x/buildout.cfg
    http://good-py.appspot.com/release/collective.xdv/1.0

parts += blog omelette trac xdv supervisor

[plone]
eggs += 
    collective.xdv
    z3c.jbot

zcml-additional =
# Add static resource dir
    <configure
        xmlns:browser="http://namespaces.zope.org/browser"
    >
    <browser:resourceDirectory
        name="static"
        directory="${buildout:directory}/theme/static"
    />
# Add custom Plone templates dir
    <include
        package="z3c.jbot"
        file="meta.zcml"
    />
    <browser:jbot
        directory="${buildout:directory}/theme/templates"
    />
    </configure>

[omelette]
recipe = collective.recipe.omelette
eggs = ${plone:eggs}

[xdv]
recipe = zc.recipe.egg

[blog]
# Compile the blog theme
recipe = plone.recipe.command
command = 
    bin/xdvcompiler -r theme/blog.xml -t theme/blog.html -o theme/blog.xsl
update-command = ${:command}

[trac]
# Compile the trac theme
recipe = plone.recipe.command
command = 
    bin/xdvcompiler -r theme/trac.xml -t theme/trac.html -o theme/trac.xsl
update-command = ${:command}

[supervisor]
recipe = collective.recipe.supervisor
port = 9003
serverurl = http://localhost:9003
programs =
    0 plone ${buildout:directory}/bin/plone [ console ]
