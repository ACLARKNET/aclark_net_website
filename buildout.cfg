[buildout]
# Extends import buildout config files from elsewhere
extends = 
    http://dist.aclark.net/build/plone/4.1.x/buildout.cfg
    http://good-py.appspot.com/release/collective.xdv/1.0

# Parts define what this buildout does
parts += blog trac xdv

[plone]
# Eggs are Python packages
eggs += 
# "New style" theming in Plone
    collective.xdv
# "New style" template overrides
    z3c.jbot

# Plone is a modern web application that uses the Zope Toolkit 
# internally to provide complex functionality in a manageable way.
# 
# The Zope Toolkit features the Zope component architecure; and 
# components are configured via the Zope Configuration Markup Language (ZCML).
#
# Rather than create a Python package to do simple customizations, we add
# our ZCML here and the plone.recipe.zope2instance will add it to our 
# Zope 2 instance configuration file(s) for us whenever we run bin/buildout.
zcml-additional =
# Add static resource dir
    <configure
        xmlns:browser="http://namespaces.zope.org/browser"
    >
    <browser:resourceDirectory
        name="static"
        directory="${buildout:directory}/static"
    />
# Add custom templates dir
    <include
        package="z3c.jbot"
        file="meta.zcml"
    />
    <browser:jbot
        directory="${buildout:directory}/templates"
    />
    </configure>

[blog]
# Compile the blog theme
recipe = plone.recipe.command
command = 
    bin/xdvcompiler -r theme/rules/blog.xml -t theme/templates/blog.html -o theme/blog.xsl
update-command = ${:command}

[trac]
# Compile the trac theme
recipe = plone.recipe.command
command = 
    bin/xdvcompiler -r theme/rules/trac.xml -t theme/templates/trac.html -o theme/trac.xsl
update-command = ${:command}

# This creates bin/xdvcompiler
[xdv]
recipe = zc.recipe.egg
